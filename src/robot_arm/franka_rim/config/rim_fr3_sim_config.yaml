# Global launch parameters (not node-specific)
/**:
  ros__parameters:
    use_sim_time: true

# Franka Model Node Parameters
franka_model_node:
  ros__parameters:
    update_freq: 100.0
    input_topic: "/franka_robot_state_broadcaster/robot_state"
    output_topic: "/fr3_model"
    robot_urdf_filename: "fr3_franka_hand.urdf"
    vel_thres: 0.005
    # Low-pass filter parameters (alpha = dt / (dt + tau_filter))
    # alpha closer to 1.0 = less filtering (more responsive)
    # alpha closer to 0.0 = more filtering (smoother but lagged)
    filter:
      enabled: true
      alpha_q: 0.3        # Joint positions
      alpha_q_dot: 0.2    # Joint velocities (more filtering)
      alpha_q_ddot: 0.1   # Joint accelerations (most filtering)
      alpha_tau: 0.2      # Joint torques
      alpha_f_ext: 0.15   # External forces
      alpha_x_ee: 0.3     # End-effector position
      alpha_v_ee: 0.2     # End-effector velocity

# Franka RIM Node Parameters  
franka_rim_node:
  ros__parameters:
    update_freq: 10.0
    interface_stiffness: 500.0
    interface_damping: 40.0

# DelayRIM Node Parameters
delay_rim_node:
  ros__parameters:
    rim_topic: "/fr3_rim_delayed"
    cmd_topic: "/osc_pd_controller/goal_pre_delay"
    control_period: 0.001
    delay_compensation_method: "zoh"
    force_scaling: 0.1
    max_workers: 8
    i3_position_scale: 1.5

# I3 Sim Node Parameters
i3_sim_node:
  ros__parameters:
    publish_frequency: 1000.0
    sine_frequency: 0.2
    amplitude: 0.1
    n_cycles: 3
    wait_to_start: true

# Visualization Node Parameters
rim_vis_node:
  ros__parameters:
    i3_sphere_size: 0.03
    rim_sphere_size: 0.03

# Network Simulation Parameters
rim_msg_delay:
  ros__parameters:
    input_topic: "/fr3_rim"
    output_topic: "/fr3_rim_delayed" 
    delay: 0
    message_type: "arm_interfaces/msg/FrankaRIM"

ee_cmd_delay:
  ros__parameters:
    input_topic: "/osc_pd_controller/goal_pre_delay"
    output_topic: "/osc_pd_controller/goal"
    delay: 0
    message_type: "geometry_msgs/msg/PointStamped"
